<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Login Admin</title>
    <link rel="stylesheet" href="css/Styles.css">
</head>

<body>
    <header>
        <nav>
            <h1>Agencia FrontDev</h1>
            <ul>
                <li><a href="Index.html">Inicio</a></li>
                <li><a href="index.html#servicios">Servicios</a></li>
                <li><a href="index.html#equipo">Nuestro Equipo</a></li>
                <li><a href="contacto.html">Cont치ctanos</a></li>
                <li><a href="login.html">Admin</a></li>
            </ul>
        </nav>
        <main class="login">
            <h2>Acceso Administrador</h2>
            <form id="loginForm">
                <label>Usuario</label>
                <input type="text" id="usuario" name="usuario" required>
                <label>Contrase침a</label>
                <input type="password" id="clave" name="clave" required>
                <button type="submit">Ingresar</button>
            </form>
            <p id="mensaje"></p>
        </main>
    </header>

    <script>
        document.getElementById("loginForm").addEventListener("submit", function(e) {
            e.preventDefault(); // Evita que el form recargue la p치gina

            const usuario = document.getElementById("usuario").value;
            const clave = document.getElementById("clave").value;

            // Leer archivo JSON
            fetch("usuarios.json")
                .then(response => {
                    if (!response.ok) {
                        throw new Error("No se pudo cargar el archivo usuarios.json");
                    }
                    return response.json();
                })
                .then(data => {
                    console.log("Usuarios cargados:", data); // 游녣 DEBUG
                    const user = data.find(u => u.usuario === usuario && u.clave === clave);
                    if (user) {
                        document.getElementById("mensaje").innerText = "Acceso permitido";
                        window.location.href = "admin.html"; // redirige al panel
                    } else {
                        document.getElementById("mensaje").innerText = "Usuario o contrase침a incorrectos";
                    }
                })
                .catch(error => {
                    console.error("Error al cargar usuarios.json:", error);
                    document.getElementById("mensaje").innerText = "Error al cargar datos de usuario";
                });
        });
    </script>
</body>

</html>